<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/bootstrap.css">
</head>
<body>

<div class="container">
    <div class="row">

        <div class="col-md-4" id="app">

            <h1>Kraft Dinner Simulator</h1>

            <h2 class="js-locations-label" style="display:none">Locations:</h2>
            <ul class="js-locations"></ul>

            <h2 class="js-cabinet-label" style="display:none;">The cabinet contains:</h2>
            <ul class="js-cabinet-contents" style="display:none"></ul>

            <h2 class="js-fridge-label" style="display:none;">The fridge contains:</h2>
            <ul class="js-fridge-contents" style="display:none"></ul>

            <h2 class="js-freezer-label" style="display:none;">The freezer contains:</h2>
            <ul class="js-freezer-contents" style="display:none"></ul>

            <h2>Inventory:</h2>
            <ul class="js-inventory"></ul>

        </div>

        <div class="col-md-8">
            <div class="js-content"></div>
        </div>
    </div>

</div>

<script src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script src="state-machine.js"></script>
<script src="game.js"></script>
<script src="main.js"></script>
<script>

    describe('home');

    function init(){
        displayLocations();
        displayInventory();
    }

    function displayInventory(){
        $('.js-inventory').empty();
        for(prop in game){
            if(game[prop].state === 'inventory'){
                $('.js-inventory').append('<li>'+game[prop].name+'</li>')
            }
        }
    }

    function displayLocations(){
        $('.js-locations').empty();
        for(prop in game){
            if(game[prop].type === 'location'){
                var txt =   '<li class="js-location" data-prop="'+prop+'">' +
                                'The <span class="js-location-description">'+game[prop].name+'</span>' +
                                ' is <span class="js-location-state">'+game[prop].state+'</span>' +
                            '</li>';
                $('.js-locations').append(txt);
            }
        }
    }

    $(document).on('click', '.js-look', function(e){
        initLocations();
        $('.js-locations-label').show();
        $(e.currentTarget).hide();
        describe('kitchen');
        init();
    }).on('click', '.js-pick', function(){
        game.kraftDinner.pickUp();
        init();
    }).on('click', '.js-open', function(){
        game.kraftDinner.open();
        init();
    }).on('click', '.js-location-state', function(e){
        var prop = $(e.currentTarget).parent().data('prop');
        game[prop].step();
        init();
    }).on('click', '.js-location-description', function(e){
        var prop = $(e.currentTarget).parent().data('prop');
        describe(prop);
        init();
    });

    init();

</script>
</body>
</html>